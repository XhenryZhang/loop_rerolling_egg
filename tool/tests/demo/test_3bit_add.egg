(include "../tool/maki_decomp.egg")

; test 3 bit add
(push)
(define three-bit-add
    (Concat (Concat (Or (And (Wire (W "b1")) (Wire (W "a1"))) (And (Or (And (Wire (W "b0")) (Wire (W "a0"))) (And (Wire (W "cin")) (Xor (Wire (W "b0")) (Wire (W "a0"))))) (Xor (Wire (W "b1")) (Wire (W "a1"))))) ; carry out
            (Xor (Xor (Wire (W "b1")) (Wire (W "a1"))) (Or (And (Wire (W "b0")) (Wire (W "a0"))) (And (Wire (W "cin")) (Xor (Wire (W "b0")) (Wire (W "a0"))))))) ; 1st bit of sum
            (Xor (Xor (Wire (W "b0")) (Wire (W "a0"))) (Wire (W "cin")))) ; 0th bit of sum
)
(run 10)
(extract (bitwidth-wexp two-bit-add))
(extract two-bit-add)
(print ripple-carry 100) ; CAVEAT: lacking feature to print ALL of a function, must manually specify amount of information to print
; however, we are only printing out the information, we have access to the entire function if we apply future rewrite rules


(pop)